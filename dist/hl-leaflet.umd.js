!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("leaflet")):"function"==typeof define&&define.amd?define(["leaflet"],n):(e||self).hlLeaflet=n(e.leaflet)}(this,function(e){function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=/*#__PURE__*/n(e);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},o.apply(this,arguments)}var r={};function i(e){return Array.prototype.slice.call(e)}function a(){return i(document.body.querySelectorAll(".hl-map")).map(function(e){var n,t,o,r=e.dataset,a={hlRender:null!=(n=r.hlRender)?n:"",hlCenter:null!=(t=r.hlCenter)?t:"[0,0]",hlZoom:null!=(o=r.hlZoom)?o:"10",markers:[]};return i(e.querySelectorAll(".hl-marker")).forEach(function(e){var n=e.dataset;a.markers.push({hlCenter:n.hlCenter,hlPopup:n.hlPopup})}),{config:a,configElement:e,renderElement:document.querySelector(a.hlRender)}})}function l(e){var n,o=e.map;if(void 0!==o){var r=e.config.hlZoom;o.setView(JSON.parse(e.config.hlCenter),parseInt(r)),(null==(n=o.options.layers)?void 0:n.find(function(e){return"© OpenStreetMap contributors"===e.options.attribution}))||t.default.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(o),o.eachLayer(function(e){e instanceof t.default.Marker&&e.removeFrom(o)}),e.config.markers.forEach(function(n){var r,i,a=null!=(r=n.hlCenter)?r:e.config.hlCenter,l=null!=(i=n.hlPopup)?i:"",u=t.default.marker(JSON.parse(a));u.setIcon(t.default.icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]})),""!==l&&u.bindPopup(l),u.addTo(o)})}}function u(e){e.forEach(function(e){var n=e.configElement,i=e.renderElement,a=e.config;if(null!==i){var u=t.default.map(i);e.map=u,l(e),r[n.id]=o({},e,{configString:JSON.stringify(a)}),u.on("moveend",function(){var e=u.getCenter(),n=u.getZoom(),t=new CustomEvent("hl-leaflet-moveend",{detail:{center:[e.lat,e.lng],zoom:n}});i.dispatchEvent(t)}),u.on("popupopen",function(e){var n=new CustomEvent("hl-leaflet-popupopen",{detail:{popup:e.popup.getElement()}});i.dispatchEvent(n)})}})}function f(e){e.forEach(function(e){var n=r[e.configElement.id];if(void 0!==n&&void 0!==n.map){var t=JSON.stringify(e.config);t!=n.configString&&(n.config=e.config,n.configString=t,l(n))}})}return window.addEventListener("load",function(){u(a()),new MutationObserver(function(){return f(a())}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-hl-center","data-hl-zoom","data-hl-render","data-hl-popup"]})}),{findMaps:a,initMaps:u,updateMaps:f,mapCache:r,apply:l}});
//# sourceMappingURL=hl-leaflet.umd.js.map
