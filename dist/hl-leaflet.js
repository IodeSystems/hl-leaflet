function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=/*#__PURE__*/e(require("leaflet"));function t(){return t=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},t.apply(this,arguments)}var o={};function r(e){return Array.prototype.slice.call(e)}function a(){return r(document.body.querySelectorAll(".hl-map")).map(function(e){var n,t,o,a=e.dataset,i={hlRender:null!=(n=a.hlRender)?n:"",hlCenter:null!=(t=a.hlCenter)?t:"[0,0]",hlZoom:null!=(o=a.hlZoom)?o:"10",markers:[]};return r(e.querySelectorAll(".hl-marker")).forEach(function(e){var n=e.dataset;i.markers.push({hlCenter:n.hlCenter,hlPopup:n.hlPopup})}),{config:i,configElement:e,renderElement:document.querySelector(i.hlRender)}})}function i(e){var t,o=e.map;if(void 0!==o){var r=e.config.hlZoom;o.setView(JSON.parse(e.config.hlCenter),parseInt(r)),(null==(t=o.options.layers)?void 0:t.find(function(e){return"© OpenStreetMap contributors"===e.options.attribution}))||n.default.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(o),o.eachLayer(function(e){e instanceof n.default.Marker&&e.removeFrom(o)}),e.config.markers.forEach(function(t){var r,a,i=null!=(r=t.hlCenter)?r:e.config.hlCenter,l=null!=(a=t.hlPopup)?a:"",c=n.default.marker(JSON.parse(i));c.setIcon(n.default.icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]})),""!==l&&c.bindPopup(l),c.addTo(o)})}}function l(e){e.forEach(function(e){var r=e.configElement,a=e.renderElement,l=e.config;if(null!==a){var c=n.default.map(a);e.map=c,i(e),o[r.id]=t({},e,{configString:JSON.stringify(l)}),c.on("moveend",function(){var e=c.getCenter(),n=c.getZoom(),t=new CustomEvent("hl-leaflet-moveend",{detail:{center:[e.lat,e.lng],zoom:n}});a.dispatchEvent(t)}),c.on("popupopen",function(e){var n=new CustomEvent("hl-leaflet-popupopen",{detail:{popup:e.popup.getElement()}});a.dispatchEvent(n)})}})}function c(e){e.forEach(function(e){var n=o[e.configElement.id];if(void 0!==n&&void 0!==n.map){var t=JSON.stringify(e.config);t!=n.configString&&(n.config=e.config,n.configString=t,i(n))}})}window.addEventListener("load",function(){l(a()),new MutationObserver(function(){return c(a())}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-hl-center","data-hl-zoom","data-hl-render","data-hl-popup"]})}),module.exports={findMaps:a,initMaps:l,updateMaps:c,mapCache:o,apply:i};
//# sourceMappingURL=hl-leaflet.js.map
